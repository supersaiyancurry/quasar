{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\jyesupriya\\\\Desktop\\\\quasar-frontend-3\\\\quasar-frontend\\\\src\\\\components\\\\product card\\\\ProductCard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport ReactTooltip from 'react-tooltip';\nimport { useAppContext } from '../utils/Context';\nimport styles from './ProductCard.module.css';\nimport Modal from '../modal/Modal';\nimport { DEFAULT_IMAGE } from '../Constants'; // import cart from './cart.png';\n\n/**\r\n * displays a product card to the UI when given its JSON Object\r\n * @param {Object} product - the product json object to display on the card\r\n * @param {String} imageSrc - the route to retrieve the product image from\r\n */\n\nconst ProductCard = ({\n  product,\n  imageSrc\n}) => {\n  _s();\n\n  const {\n    userObject,\n    setUserObject,\n    isLoggedIn,\n    setCrt\n  } = useAppContext();\n  const [onWishList, setOnWishList] = useState(userObject && userObject.wishList.includes(product.id));\n  const [onShoppingCart, setOnShoppingCart] = useState(userObject && userObject.shoppingCart.includes(product.id));\n  /**\r\n   * sends a request to add a product to the user's wishlist\r\n   */\n\n  const addToWishList = async () => {\n    await fetch(`http://localhost:8080/customers/${sessionStorage.getItem('id')}/wishlist`, {\n      method: 'PUT',\n      headers: new Headers({\n        token: sessionStorage.getItem('token'),\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify(product)\n    }).then(async response => {\n      if (response.ok) {\n        const updatedUser = await response.json();\n        setUserObject(updatedUser);\n        setOnWishList(true);\n      }\n    });\n  };\n\n  const addToShoppingCart = async () => {\n    await fetch(`http://localhost:8080/customers/${sessionStorage.getItem('id')}/cart`, {\n      method: 'PUT',\n      headers: new Headers({\n        token: sessionStorage.getItem('token'),\n        'Content-Type': 'application/json'\n      }),\n      body: JSON.stringify(product)\n    }).then(async response => {\n      if (response.ok) {\n        const updatedUser = await response.json();\n        setUserObject(updatedUser);\n        setOnShoppingCart(true);\n        setCrt(updatedUser.shoppingCart.length);\n      }\n    });\n  };\n\n  let wishListBtn;\n  let shoppingCartBtn;\n\n  if (isLoggedIn) {\n    if (onWishList) {\n      wishListBtn = /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: `btn col-auto offset-7 ${styles['wishlist-btn']}`,\n        \"data-tip\": true,\n        \"data-for\": `wish-list-tip-${product.id}`,\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-heart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ReactTooltip, {\n          id: `wish-list-tip-${product.id}`,\n          place: \"right\",\n          effect: \"solid\",\n          children: \"Item is in your wishlist\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this);\n    } else {\n      wishListBtn = /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        className: `btn col-auto offset-7 ${styles['wishlist-btn']}`,\n        onClick: addToWishList,\n        \"data-tip\": true,\n        \"data-for\": `add-to-wish-list-tip-${product.id}`,\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"far fa-heart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ReactTooltip, {\n          id: `add-to-wish-list-tip-${product.id}`,\n          place: \"right\",\n          effect: \"solid\",\n          children: \"Add to wishlist\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this);\n    }\n\n    if (onShoppingCart) {\n      shoppingCartBtn = /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.cartImageProduct,\n        type: \"button\",\n        \"data-tip\": true,\n        \"data-for\": `shoppingcart-tip-${product.id}`,\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-cart-arrow-down\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ReactTooltip, {\n          id: `shoppingcart-tip-${product.id}`,\n          place: \"right\",\n          effect: \"solid\",\n          children: \"Item is in your shopping cart!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this);\n    } else {\n      shoppingCartBtn = /*#__PURE__*/_jsxDEV(\"button\", {\n        className: styles.cartImageProduct,\n        type: \"button\",\n        onClick: addToShoppingCart,\n        \"data-tip\": true,\n        \"data-for\": `add-to-shoppingcart-tip-${product.id}`,\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"fas fa-cart-plus\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ReactTooltip, {\n          id: `add-to-shoppingcart-tip-${product.id}`,\n          place: \"right\",\n          effect: \"solid\",\n          children: \"Add to shopping cart\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"col p-3\",\n    \"data-testid\": \"products\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `card border border-dark w-100 m-auto mt-5 ${styles.card}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body m-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            className: `card-img-top img-fluid mb-3 ${styles.image}`,\n            src: imageSrc || DEFAULT_IMAGE,\n            alt: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"card-title text-center\",\n          children: `${product.name}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n          className: `card-subtitle mb-2 font-weight-bold ${styles['category-tag']}`,\n          \"data-testid\": \"category\",\n          children: `${product.category}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: `card-text ${styles.description}`,\n          \"data-testid\": \"description\",\n          children: `${product.description}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row\",\n          children: [/*#__PURE__*/_jsxDEV(\"b\", {\n            className: \"col-6\",\n            children: `$${product.price.toFixed(2)}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-6\",\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Product Type: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: `${product.type}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this)]\n      }, product.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          style: {\n            color: '#007bff'\n          },\n          className: `col-3 btn link ${styles.button}`,\n          \"data-toggle\": \"modal\",\n          \"data-target\": `#${product.name.replace(/ /g, '')}Modal`,\n          children: \"View\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 11\n        }, this), wishListBtn, shoppingCartBtn]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Modal, {\n        product: product,\n        imageSrc: imageSrc,\n        wishListBtn: wishListBtn,\n        shoppingCartBtn: shoppingCartBtn\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProductCard, \"l0BjPNCx6kJrPrmPq4+cSRzYmcM=\", false, function () {\n  return [useAppContext];\n});\n\n_c = ProductCard;\nexport default ProductCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductCard\");","map":{"version":3,"sources":["C:/Users/jyesupriya/Desktop/quasar-frontend-3/quasar-frontend/src/components/product card/ProductCard.js"],"names":["React","useState","ReactTooltip","useAppContext","styles","Modal","DEFAULT_IMAGE","ProductCard","product","imageSrc","userObject","setUserObject","isLoggedIn","setCrt","onWishList","setOnWishList","wishList","includes","id","onShoppingCart","setOnShoppingCart","shoppingCart","addToWishList","fetch","sessionStorage","getItem","method","headers","Headers","token","body","JSON","stringify","then","response","ok","updatedUser","json","addToShoppingCart","length","wishListBtn","shoppingCartBtn","cartImageProduct","card","image","name","category","description","price","toFixed","type","color","button","replace"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,YAAP,MAAyB,eAAzB;AACA,SAASC,aAAT,QAA8B,kBAA9B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,SAASC,aAAT,QAA8B,cAA9B,C,CACA;;AAEA;AACA;AACA;AACA;AACA;;AACA,MAAMC,WAAW,GAAG,CAAC;AAAEC,EAAAA,OAAF;AAAWC,EAAAA;AAAX,CAAD,KAA2B;AAAA;;AAC7C,QAAM;AACJC,IAAAA,UADI;AACQC,IAAAA,aADR;AACuBC,IAAAA,UADvB;AACmCC,IAAAA;AADnC,MAEFV,aAAa,EAFjB;AAGA,QAAM,CAACW,UAAD,EAAaC,aAAb,IAA8Bd,QAAQ,CAC1CS,UAAU,IAAIA,UAAU,CAACM,QAAX,CAAoBC,QAApB,CAA6BT,OAAO,CAACU,EAArC,CAD4B,CAA5C;AAGA,QAAM,CAACC,cAAD,EAAiBC,iBAAjB,IAAsCnB,QAAQ,CAClDS,UAAU,IAAIA,UAAU,CAACW,YAAX,CAAwBJ,QAAxB,CAAiCT,OAAO,CAACU,EAAzC,CADoC,CAApD;AAIA;AACF;AACA;;AACE,QAAMI,aAAa,GAAG,YAAY;AAChC,UAAMC,KAAK,CAAE,mCAAkCC,cAAc,CAACC,OAAf,CAAuB,IAAvB,CAA6B,WAAjE,EAA6E;AACtFC,MAAAA,MAAM,EAAE,KAD8E;AAEtFC,MAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AACnBC,QAAAA,KAAK,EAAEL,cAAc,CAACC,OAAf,CAAuB,OAAvB,CADY;AAEnB,wBAAgB;AAFG,OAAZ,CAF6E;AAMtFK,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAexB,OAAf;AANgF,KAA7E,CAAL,CAOHyB,IAPG,CAOE,MAAOC,QAAP,IAAoB;AAC1B,UAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,cAAMC,WAAW,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAA1B;AACA1B,QAAAA,aAAa,CAACyB,WAAD,CAAb;AACArB,QAAAA,aAAa,CAAC,IAAD,CAAb;AACD;AACF,KAbK,CAAN;AAcD,GAfD;;AAiBA,QAAMuB,iBAAiB,GAAG,YAAY;AACpC,UAAMf,KAAK,CAAE,mCAAkCC,cAAc,CAACC,OAAf,CAAuB,IAAvB,CAA6B,OAAjE,EAAyE;AAClFC,MAAAA,MAAM,EAAE,KAD0E;AAElFC,MAAAA,OAAO,EAAE,IAAIC,OAAJ,CAAY;AACnBC,QAAAA,KAAK,EAAEL,cAAc,CAACC,OAAf,CAAuB,OAAvB,CADY;AAEnB,wBAAgB;AAFG,OAAZ,CAFyE;AAMlFK,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAexB,OAAf;AAN4E,KAAzE,CAAL,CAOHyB,IAPG,CAOE,MAAOC,QAAP,IAAoB;AAC1B,UAAIA,QAAQ,CAACC,EAAb,EAAiB;AACf,cAAMC,WAAW,GAAG,MAAMF,QAAQ,CAACG,IAAT,EAA1B;AACA1B,QAAAA,aAAa,CAACyB,WAAD,CAAb;AACAhB,QAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACAP,QAAAA,MAAM,CAACuB,WAAW,CAACf,YAAZ,CAAyBkB,MAA1B,CAAN;AACD;AACF,KAdK,CAAN;AAeD,GAhBD;;AAkBA,MAAIC,WAAJ;AACA,MAAIC,eAAJ;;AACA,MAAI7B,UAAJ,EAAgB;AACd,QAAIE,UAAJ,EAAgB;AACd0B,MAAAA,WAAW,gBACT;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,EAAG,yBAAwBpC,MAAM,CAAC,cAAD,CAAiB,EAF7D;AAGE,wBAHF;AAIE,oBAAW,iBAAgBI,OAAO,CAACU,EAAG,EAJxC;AAAA,gCAME;AAAG,UAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBANF,eAOE,QAAC,YAAD;AAAc,UAAA,EAAE,EAAG,iBAAgBV,OAAO,CAACU,EAAG,EAA9C;AAAiD,UAAA,KAAK,EAAC,OAAvD;AAA+D,UAAA,MAAM,EAAC,OAAtE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAaD,KAdD,MAcO;AACLsB,MAAAA,WAAW,gBACT;AACE,QAAA,IAAI,EAAC,QADP;AAEE,QAAA,SAAS,EAAG,yBAAwBpC,MAAM,CAAC,cAAD,CAAiB,EAF7D;AAGE,QAAA,OAAO,EAAEkB,aAHX;AAIE,wBAJF;AAKE,oBAAW,wBAAuBd,OAAO,CAACU,EAAG,EAL/C;AAAA,gCAOE;AAAG,UAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBAPF,eAQE,QAAC,YAAD;AAAc,UAAA,EAAE,EAAG,wBAAuBV,OAAO,CAACU,EAAG,EAArD;AAAwD,UAAA,KAAK,EAAC,OAA9D;AAAsE,UAAA,MAAM,EAAC,OAA7E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBARF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAcD;;AACD,QAAIC,cAAJ,EAAoB;AAClBsB,MAAAA,eAAe,gBACb;AAAQ,QAAA,SAAS,EAAErC,MAAM,CAACsC,gBAA1B;AAA4C,QAAA,IAAI,EAAC,QAAjD;AAA0D,wBAA1D;AAAmE,oBAAW,oBAAmBlC,OAAO,CAACU,EAAG,EAA5G;AAAA,gCACE;AAAG,UAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,YAAD;AAAc,UAAA,EAAE,EAAG,oBAAmBV,OAAO,CAACU,EAAG,EAAjD;AAAoD,UAAA,KAAK,EAAC,OAA1D;AAAkE,UAAA,MAAM,EAAC,OAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAQD,KATD,MASO;AACLuB,MAAAA,eAAe,gBACb;AAAQ,QAAA,SAAS,EAAErC,MAAM,CAACsC,gBAA1B;AAA4C,QAAA,IAAI,EAAC,QAAjD;AAA0D,QAAA,OAAO,EAAEJ,iBAAnE;AAAsF,wBAAtF;AAA+F,oBAAW,2BAA0B9B,OAAO,CAACU,EAAG,EAA/I;AAAA,gCACE;AAAG,UAAA,SAAS,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE,QAAC,YAAD;AAAc,UAAA,EAAE,EAAG,2BAA0BV,OAAO,CAACU,EAAG,EAAxD;AAA2D,UAAA,KAAK,EAAC,OAAjE;AAAyE,UAAA,MAAM,EAAC,OAAhF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAQD;AACF;;AAED,sBACE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAyB,mBAAY,UAArC;AAAA,4BACE;AAAK,MAAA,SAAS,EAAG,6CAA4Cd,MAAM,CAACuC,IAAK,EAAzE;AAAA,8BACE;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA,gCACE;AAAK,UAAA,SAAS,EAAC,aAAf;AAAA,iCACE;AACE,YAAA,SAAS,EAAG,+BAA8BvC,MAAM,CAACwC,KAAM,EADzD;AAEE,YAAA,GAAG,EAAEnC,QAAQ,IAAIH,aAFnB;AAGE,YAAA,GAAG,EAAEE,OAAO,CAACqC;AAHf;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,gBADF,eAQE;AAAI,UAAA,SAAS,EAAC,wBAAd;AAAA,oBAAyC,GAAErC,OAAO,CAACqC,IAAK;AAAxD;AAAA;AAAA;AAAA;AAAA,gBARF,eASE;AAAI,UAAA,SAAS,EAAG,uCAAsCzC,MAAM,CAAC,cAAD,CAAiB,EAA7E;AAAgF,yBAAY,UAA5F;AAAA,oBAAyG,GAAEI,OAAO,CAACsC,QAAS;AAA5H;AAAA;AAAA;AAAA;AAAA,gBATF,eAUE;AAAG,UAAA,SAAS,EAAG,aAAY1C,MAAM,CAAC2C,WAAY,EAA9C;AAAiD,yBAAY,aAA7D;AAAA,oBAA6E,GAAEvC,OAAO,CAACuC,WAAY;AAAnG;AAAA;AAAA;AAAA;AAAA,gBAVF,eAWE;AAAK,UAAA,SAAS,EAAC,KAAf;AAAA,kCACE;AAAG,YAAA,SAAS,EAAC,OAAb;AAAA,sBAAuB,IAAGvC,OAAO,CAACwC,KAAR,CAAcC,OAAd,CAAsB,CAAtB,CAAyB;AAAnD;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAK,YAAA,SAAS,EAAC,OAAf;AAAA,oCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAEE;AAAA,wBAAQ,GAAEzC,OAAO,CAAC0C,IAAK;AAAvB;AAAA;AAAA;AAAA;AAAA,oBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,gBAXF;AAAA,SAAuC1C,OAAO,CAACU,EAA/C;AAAA;AAAA;AAAA;AAAA,cADF,eAoBE;AAAK,QAAA,SAAS,EAAC,MAAf;AAAA,gCACE;AACE,UAAA,IAAI,EAAC,QADP;AAEE,UAAA,KAAK,EAAE;AAAEiC,YAAAA,KAAK,EAAE;AAAT,WAFT;AAGE,UAAA,SAAS,EAAG,kBAAiB/C,MAAM,CAACgD,MAAO,EAH7C;AAIE,yBAAY,OAJd;AAKE,yBAAc,IAAG5C,OAAO,CAACqC,IAAR,CAAaQ,OAAb,CAAqB,IAArB,EAA2B,EAA3B,CAA+B,OALlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,EAUGb,WAVH,EAWGC,eAXH;AAAA;AAAA;AAAA;AAAA;AAAA,cApBF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAmCE;AAAA,6BACE,QAAC,KAAD;AACE,QAAA,OAAO,EAAEjC,OADX;AAEE,QAAA,QAAQ,EAAEC,QAFZ;AAGE,QAAA,WAAW,EAAE+B,WAHf;AAIE,QAAA,eAAe,EAAEC;AAJnB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YAnCF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA8CD,CArJD;;GAAMlC,W;UAGAJ,a;;;KAHAI,W;AAuJN,eAAeA,WAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport ReactTooltip from 'react-tooltip';\r\nimport { useAppContext } from '../utils/Context';\r\nimport styles from './ProductCard.module.css';\r\nimport Modal from '../modal/Modal';\r\nimport { DEFAULT_IMAGE } from '../Constants';\r\n// import cart from './cart.png';\r\n\r\n/**\r\n * displays a product card to the UI when given its JSON Object\r\n * @param {Object} product - the product json object to display on the card\r\n * @param {String} imageSrc - the route to retrieve the product image from\r\n */\r\nconst ProductCard = ({ product, imageSrc }) => {\r\n  const {\r\n    userObject, setUserObject, isLoggedIn, setCrt\r\n  } = useAppContext();\r\n  const [onWishList, setOnWishList] = useState(\r\n    userObject && userObject.wishList.includes(product.id)\r\n  );\r\n  const [onShoppingCart, setOnShoppingCart] = useState(\r\n    userObject && userObject.shoppingCart.includes(product.id)\r\n  );\r\n\r\n  /**\r\n   * sends a request to add a product to the user's wishlist\r\n   */\r\n  const addToWishList = async () => {\r\n    await fetch(`http://localhost:8080/customers/${sessionStorage.getItem('id')}/wishlist`, {\r\n      method: 'PUT',\r\n      headers: new Headers({\r\n        token: sessionStorage.getItem('token'),\r\n        'Content-Type': 'application/json'\r\n      }),\r\n      body: JSON.stringify(product)\r\n    }).then(async (response) => {\r\n      if (response.ok) {\r\n        const updatedUser = await response.json();\r\n        setUserObject(updatedUser);\r\n        setOnWishList(true);\r\n      }\r\n    });\r\n  };\r\n\r\n  const addToShoppingCart = async () => {\r\n    await fetch(`http://localhost:8080/customers/${sessionStorage.getItem('id')}/cart`, {\r\n      method: 'PUT',\r\n      headers: new Headers({\r\n        token: sessionStorage.getItem('token'),\r\n        'Content-Type': 'application/json'\r\n      }),\r\n      body: JSON.stringify(product)\r\n    }).then(async (response) => {\r\n      if (response.ok) {\r\n        const updatedUser = await response.json();\r\n        setUserObject(updatedUser);\r\n        setOnShoppingCart(true);\r\n        setCrt(updatedUser.shoppingCart.length);\r\n      }\r\n    });\r\n  };\r\n\r\n  let wishListBtn;\r\n  let shoppingCartBtn;\r\n  if (isLoggedIn) {\r\n    if (onWishList) {\r\n      wishListBtn = (\r\n        <button\r\n          type=\"button\"\r\n          className={`btn col-auto offset-7 ${styles['wishlist-btn']}`}\r\n          data-tip\r\n          data-for={`wish-list-tip-${product.id}`}\r\n        >\r\n          <i className=\"fas fa-heart\" />\r\n          <ReactTooltip id={`wish-list-tip-${product.id}`} place=\"right\" effect=\"solid\">\r\n            Item is in your wishlist\r\n          </ReactTooltip>\r\n        </button>\r\n      );\r\n    } else {\r\n      wishListBtn = (\r\n        <button\r\n          type=\"button\"\r\n          className={`btn col-auto offset-7 ${styles['wishlist-btn']}`}\r\n          onClick={addToWishList}\r\n          data-tip\r\n          data-for={`add-to-wish-list-tip-${product.id}`}\r\n        >\r\n          <i className=\"far fa-heart\" />\r\n          <ReactTooltip id={`add-to-wish-list-tip-${product.id}`} place=\"right\" effect=\"solid\">\r\n            Add to wishlist\r\n          </ReactTooltip>\r\n        </button>\r\n      );\r\n    }\r\n    if (onShoppingCart) {\r\n      shoppingCartBtn = (\r\n        <button className={styles.cartImageProduct} type=\"button\" data-tip data-for={`shoppingcart-tip-${product.id}`}>\r\n          <i className=\"fas fa-cart-arrow-down\" />\r\n          <ReactTooltip id={`shoppingcart-tip-${product.id}`} place=\"right\" effect=\"solid\">\r\n            Item is in your shopping cart!\r\n          </ReactTooltip>\r\n        </button>\r\n      );\r\n    } else {\r\n      shoppingCartBtn = (\r\n        <button className={styles.cartImageProduct} type=\"button\" onClick={addToShoppingCart} data-tip data-for={`add-to-shoppingcart-tip-${product.id}`}>\r\n          <i className=\"fas fa-cart-plus\" />\r\n          <ReactTooltip id={`add-to-shoppingcart-tip-${product.id}`} place=\"right\" effect=\"solid\">\r\n            Add to shopping cart\r\n          </ReactTooltip>\r\n        </button>\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"col p-3\" data-testid=\"products\">\r\n      <div className={`card border border-dark w-100 m-auto mt-5 ${styles.card}`}>\r\n        <div className=\"card-body m-auto\" key={product.id}>\r\n          <div className=\"text-center\">\r\n            <img\r\n              className={`card-img-top img-fluid mb-3 ${styles.image}`}\r\n              src={imageSrc || DEFAULT_IMAGE}\r\n              alt={product.name}\r\n            />\r\n          </div>\r\n          <h5 className=\"card-title text-center\">{`${product.name}`}</h5>\r\n          <h6 className={`card-subtitle mb-2 font-weight-bold ${styles['category-tag']}`} data-testid=\"category\">{`${product.category}`}</h6>\r\n          <p className={`card-text ${styles.description}`} data-testid=\"description\">{`${product.description}`}</p>\r\n          <div className=\"row\">\r\n            <b className=\"col-6\">{`$${product.price.toFixed(2)}`}</b>\r\n            <div className=\"col-6\">\r\n              <b>Product Type: </b>\r\n              <span>{`${product.type}`}</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"mb-1\">\r\n          <button\r\n            type=\"button\"\r\n            style={{ color: '#007bff' }}\r\n            className={`col-3 btn link ${styles.button}`}\r\n            data-toggle=\"modal\"\r\n            data-target={`#${product.name.replace(/ /g, '')}Modal`}\r\n          >\r\n            View\r\n          </button>\r\n          {wishListBtn}\r\n          {shoppingCartBtn}\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <Modal\r\n          product={product}\r\n          imageSrc={imageSrc}\r\n          wishListBtn={wishListBtn}\r\n          shoppingCartBtn={shoppingCartBtn}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductCard;\r\n"]},"metadata":{},"sourceType":"module"}